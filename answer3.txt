To implement per-player controllable ghost delay, do the following:

**1. Store Delay Per Player (Server)**

- In `server/app.py`, when a player connects, add a `delay` field to their data, initialized to 0.5:

```python
players[request.sid] = {
    'x': START_X,
    'y': START_Y,
    'history': [{'x': START_X, 'y': START_Y, 't': now}],
    'score': 0,
    'delay': 0.5,  # start with 0.5s
}
```

**2. Add Events: Increase/Decrease Delay from Client**

- In `server/app.py`, add two new socket handlers:

```python
@socketio.on('increase_delay')
def handle_increase_delay():
    p = players.get(request.sid)
    if not p:
        return
    p['delay'] = min(1.0, p.get('delay', 0.5) + 0.1)

@socketio.on('decrease_delay')
def handle_decrease_delay():
    p = players.get(request.sid)
    if not p:
        return
    p['delay'] = max(0.1, p.get('delay', 0.5) - 0.1)
```

**3. Use Player’s Own Delay for Ghost (Server)**

- Wherever you call `get_ghost_position` for a player’s *own* ghost (typically for the main player in `emit_game_state`), use their `delay` value instead of a fixed constant:
  
```python
ghost_pos = get_ghost_position(p['history'], now, p.get('delay', 0.5))
```

- For gameplay/mechanics where you want each player to see their own ghost at their custom delay, always use the individual’s `delay`. For other players’ ghosts, you can also use their delay, or a fixed one (decide as needed for your mechanic).

**4. Expose Delay to the Client**

- When sending game state, include each player's `delay`:

```python
state[sid] = {
    'x': p['x'],
    'y': p['y'],
    'ghost': ghost_pos,
    'score': p.get('score', 0),
    'delay': p.get('delay', 0.5),
}
```

**5. Client: Send j/l Key Events to Server**

- In `client/main.js`, listen for `KeyL` and `KeyJ`, and emit to server:

```js
document.addEventListener('keydown', (e) => {
    // ... existing code ...
    if (e.code === 'KeyL') {
        socket.emit('increase_delay');
    }
    if (e.code === 'KeyJ') {
        socket.emit('decrease_delay');
    }
});
```

**6. (Optional) Show Current Delay**

- Display the player’s current delay on the screen using the state sent from the server. For example:

```js
if (players[myId]) {
    document.getElementById('delay').innerText = 'Delay: ' + (players[myId].delay || 0.5).toFixed(2) + 's';
}
```
and add a `<div id="delay"></div>` to your HTML.

---

**Summary:**

- Store individual delay per player on the server.
- Adjust with j/l keys from the client.
- Clamp delay between 0.1 and 1.0 seconds.
- Use the individual delay for their own ghost.
- Optionally display current delay client-side.